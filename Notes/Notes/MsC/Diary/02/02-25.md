cell_seg is intended to load each roi, its mask, and positions, get preprocessed, and get passed into the patch generator.

The preprocessing needs to be made so that ROIs that originate from the same image gets preprocessed the same.

It is safer to preprocess all the data before the loop that loads each roi, mask and positions for the patch generator, otherwise if the preprocess is inside the loop ill have to load the global properties.

I could make the outer loop a generator that takes image names. The generator will then take the image name, initialize the paths to relevant ROIs, masks and positions that are connected to that image, get the global properties, and in the loop inside that function process each ROI, mask and positions and yield it.